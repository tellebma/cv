---
import '../styles/global.css';
import cv from '../data/cv.json';
---

<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>{cv.basics.name} - {cv.basics.headline}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body class="font-sans bg-gray-100 text-gray-900 m-0 p-0">
  
  <!-- Bandeau Header -->
  <header class="bg-[{cv.metadata.theme.primary}] text-white p-8 flex items-center relative">
    <img src={cv.basics.picture.url} alt="Photo de profil" class="rounded-full w-32 h-32 mr-6" />
    <div>
      <h1 class="text-4xl font-bold m-0">{cv.basics.name}</h1>
      <h2 class="text-2xl font-light m-0">{cv.basics.headline}</h2>
      <p class="mt-2">
        üìç {cv.basics.location} | üìû {cv.basics.phone} | ‚úâÔ∏è {cv.basics.email}
      </p>
    </div>

    <div class="flex items-center ml-auto space-x-4">
      <button 
        class="ml-auto bg-white text-black dark:bg-gray-700 dark:text-white py-2 px-4 rounded shadow hover:bg-gray-200 dark:hover:bg-gray-600 transition"
        onClick={() => document.body.classList.toggle('dark')}
      >
        üåó Mode
      </button>
      <a 
        href="/src/data/cv.pdf" 
        target="_blank" 
        class="bg-white text-black py-2 px-4 rounded shadow hover:bg-gray-200 transition"
      >
        üìÑ T√©l√©charger CV
      </a>
    </div>
  </header>

  <main class="flex flex-col md:flex-row max-w-6xl mx-auto py-8 px-4 gap-8">
    
    <!-- Colonne de gauche -->
    <aside class="w-full md:w-1/3 space-y-8">
      
      <!-- Profils -->
      <section>
        <h3 class="text-2xl font-semibold mb-2">Profils</h3>
        <ul class="space-y-1">
          {cv.sections.profiles.items.map(profile => (
            <li>
              <a href={profile.url.href} target="_blank" class="text-blue-600 hover:underline">
                {profile.network}: {profile.username}
              </a>
            </li>
          ))}
        </ul>
      </section>

      <!-- Comp√©tences -->
      <section>
        <h3 class="text-xl font-semibold mb-2">Comp√©tences</h3>
        {cv.sections.skills.items.map(skill => (
          <div class="mb-4">
            <strong>{skill.name}</strong>
            <ul class="list-disc list-inside text-sm ml-4">
              {skill.keywords.map(keyword => (
                <li>{keyword}</li>
              ))}
            </ul>
          </div>
        ))}
      </section>

      <!-- Centres d'int√©r√™t -->
      <section>
        <h3 class="text-xl font-semibold mb-2">Centres d'int√©r√™t</h3>
        <ul class="space-y-1">
          {cv.sections.interests.items.map(interest => (
            <li>
              {interest.name}
              {interest.keywords.length > 0 && (
                <ul class="list-disc list-inside text-sm ml-4">
                  {interest.keywords.map(k => (<li>{k}</li>))}
                </ul>
              )}
            </li>
          ))}
        </ul>
      </section>

      <!-- Certifications -->
      <section>
        <h3 class="text-xl font-semibold mb-2">Certifications</h3>
        {cv.sections.certifications.items.map(certif => (
          <div class="mb-4">
            <strong>{certif.name}</strong> ‚Äî {certif.issuer}<br/>
            <small class="text-gray-500">{certif.date}</small>
          </div>
        ))}
      </section>
    
    </aside>

    <!-- Colonne de droite -->
    <section class="w-full md:w-2/3 space-y-12">
      
      <!-- R√©sum√© -->
      <section>
        <h2 class="text-2xl font-bold mb-4">√Ä propos</h2>
        <div class="text-sm" set:html={cv.sections.summary.content}></div>
      </section>

      <!-- Exp√©rience professionnelle -->
      <section>
        <h2 class="text-2xl font-bold mb-4">Exp√©rience professionnelle</h2>
        {cv.sections.experience.items.map(exp => (
          <div class="mb-8">
            <h3 class="text-xl font-semibold">{exp.position} ‚Äî {exp.company}</h3>
            <p class="text-sm text-gray-500"><em>{exp.date} | {exp.location}</em></p>
            <div class="text-sm mt-2" set:html={exp.summary}></div>
          </div>
        ))}
      </section>

      <!-- Dipl√¥mes -->
      <section>
        <h2 class="text-2xl font-bold mb-4">Dipl√¥mes et formations</h2>
        {cv.sections.education.items.map(edu => (
          <div class="mb-8">
            <h3 class="text-xl font-semibold">{edu.institution}</h3>
            <p class="text-sm text-gray-500"><em>{edu.studyType} ‚Äî {edu.area} ({edu.date})</em></p>
            <div class="text-sm mt-2" set:html={edu.summary}></div>
          </div>
        ))}
      </section>

      <!-- Langues -->
      <section>
        <h2 class="text-2xl font-bold mb-4">Langues</h2>
        <ul class="list-disc list-inside text-sm ml-4 space-y-1">
          {cv.sections.languages.items.map(lang => (
            <li>{lang.name} ‚Äî {lang.description}</li>
          ))}
        </ul>
      </section>

      <!-- R√©f√©rences -->
      <section>
        <h2 class="text-2xl font-bold mb-4">R√©f√©rences</h2>
        {cv.sections.references.items.map(ref => (
          <p class="text-sm"><strong>{ref.name}</strong> ‚Äî {ref.description}</p>
        ))}
      </section>

    </section>

  </main>

</body>
</html>
